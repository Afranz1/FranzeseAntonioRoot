<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <!--
<link rel="stylesheet" type="text/css" href="../css/issStyle1.css">
<script type="text/javascript" src="../css/issStyle.js"></script>
-->
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
	font-size: 93%;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 90%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 90%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	font-size: 90%;
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	font-size: 90%;
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	 
    font-size: 18px;
}
k{
    color: #990000;
	font-weight: bold;
	font-size: 90%;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px;
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #ccffcc;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;

}
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}
div.remark{
	background-color: #E3F2FD;
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed

}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>resumableBoundaryWalker</title></head>
    
<body>
<div id="top">
<h1>Lab ISS | the project resumableBoundaryWalker<font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
This case-study starts to deal with the design and development of proactive/reactive software systems which work under user-control.
 
<h2>Requirements</h2>

 
<div class="remark">
 
Design and build a software system (named from now on 'the application') that leads the robot described in 
<a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="lab"><em>VirtualRobot2021.html</em></a> 
to walk along the boundary of a empty, rectangular room under user control. 
<br/>
More specifically, the <ks>user story</ks> can be summarized as follows:
<br/>
<table style="width:98%">
<tbody>	

<tr>
<td style="width:65%" >
the robot is initially located at the <ks>HOME</ks> position, as shown in the picture on the rigth
</td>
<td><center><img src="./img/emptyGridWithHome.png" alt="emptyGridWithHome" width="35%"></center>
</td>
</tr>

<tr>
<td style="width:65%" >
 the application presents to the user a <ks>consoleGui</ks> similar to that shown in the picture on the rigth
</td>
<td><center><img src="./img/stopResumeConsole.png" alt="stopResumeConsole" width="35%"></center>
</td>
</tr>



<tr>
<td style="width:65%" >
when the user hits the button <k>RESUME</k> the robot <ks>starts or continue to walk</ks> along the boundary, while
updating a <ks>robot-moves history</ks>;
</td>
<td> 
</td>
</tr>

<tr>
<td style="width:65%" >
when the user hits the button <k>STOP</k> the robot stop its journey, waiting for another <k>RESUME</k> ;
</td>
<td> 
</td>
</tr>

<tr>
<td style="width:65%" >
when the robot reachs its <ks>HOME</ks> again, the application <i>shows the robot-moves history</i> on the standard output device.
</td>
<td> 
</td>
</tr>


 </tbody>
</table>

 
</div>

 <h3>Delivery</h3>
The customer <ks>hopes to receive</ks> a working prototype (written in Java ) of the application by <k>Monady 22 March</k>. 
The name of this file (in pdf) should be:
<pre>
cognome_nome_resumablebw.pdf
</pre>

<h2>Requirement analysis</h2>
The <b>interation with the client</b> made it clear that he associates the following meaning with nouns:
 <ul>
<li><ks>room</ks>: a conventional (rectangular) room of an house;</li>
<li><ks>boundary</ks>: the perimeter of the room, that is physically delimited by solid <ks>walls</ks>;</li>
<li><ks>robot</ks>: a device able to execute move commands sent over the network, as described in the document <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html" target="lab"><em>VirtualRobot2021.html</em></a> provided by the customer; </li>
<li><ks>Home</ks>: the position where the robot starts;</li>
<li><ks>consoleGui</ks>: <b>GUI</b> stands for <b>Graphical User Interface</b>. GUI permits users to use the graphics to interact with an operating system;</li>
<li><ks>robot-moves history</ks>: a map that traces all the movements of the robot;</li>
<li><ks>journey</ks>: path of the robot;</li>
</ul>
For the verbs:
<ul>
<li><ks>walk</ks>: the  robot moves forward, close to the room walls;</li>
<li><ks>reachs its HOME again</ks>: the robot complete the boundary retourning in the <ks>Home</ks> position;</li>


</ul> 

</div>

<h2>Problem analysis</h2>
We highlight that:
<ol>
<li>In the <a href="https://htmlpreview.github.io/?https://github.com/anatali/issLab2021/blob/master/it.unibo.virtualRobot2020/userDocs/VirtualRobot2021.html#commands" target="web">VirtualRobot2021.html: commands</a> the customer states
that the robot can receive move commands in two different ways:
	<ul>
	<li>by sending messages to the port <tt>8090</tt> using  <ks>HTTP POST</ks> </li>
	<li>by sending messages to the port <tt>8091</tt> using a <ks>websocket</ks> </li>
	</ul>
</li>
 
<li> With respect to the technological level, there are many libraries in many programming languages that support the
required protcols. 
<div class="remark">
However, the problem does introduce an <k>abstraction gap at the conceptual level</k>,
since <kc>the required logical interaction</kc> is not always a <em>request-response</em>, <b>regardless of the technology</b> used to implement
the interaction with the robot.
</div>
</li>
 
</ol>


<h3>Logical architecture</h3>
 

<table style="width:98%">
<tbody>	
<tr>
<td style="width:60%">
We must design and build a <k>distributed system</k> with two software macro-components:
	<ol>
	<li>the <a href="VirtualRobot2021.html" target="web"><ks>VirtualRobot</ks></a>, given by the customer</li>
	<li>our <ks>resumableBoundaryWalker</ks> application that interacts with the robot with a <i>request-response</i> pattern</li>
	</ol>
A first scheme of the logical architecture  of the systems can be defined as shown in the figure
(for the meaning of the symbols, see the <a href="legenda.png" target="web">legenda</a>)

</td>
<td>  <center><img src="./img/logicArch2.png" alt="logicArch2" width="98%" ></center>
</td>
</tr>
</tbody>
</table>

<br/><br/>
We observe that:
<ul>
<li>The specification of the exact 'nature' of our <em>resumableBoundaryWalker</em> software is left to the designer. 
However, we can say here that is it <b>not a database, or a function or an object</b>.  
<li>To make our <em>resumableBoundaryWalker</em> software <k>as much as possibile independent</k> from the undelying communication protocols,
the designer could make reference to proper <a href="https://it.wikipedia.org/wiki/Design_pattern" target="web"><em>design pattern</em></a>, 
e.g.
<a href="https://it.wikipedia.org/wiki/Adapter_pattern" target="web"><ks>Adapter</ks></a>, 
<a href="https://it.wikipedia.org/wiki/Bridge_pattern" target="web"><ks>Bridge</ks></a>,
<a href="https://it.wikipedia.org/wiki/Fa%C3%A7ade_pattern" target="web"><ks>Facade</ks></a>.
 </li>
<li>
It is quite easy to define <k>what the robot has to do</k>  the meet the requirements:
<pre>
let us define <kc>emum direction {UP,DOWN,LEFT,RIGHT}</kc>
the robot start in the HOME position, direction=DOWN 
	1) send to the robot the request to execute the command <kc>moveForward</kc> with the resume button 
	and continue to do it, until the answer of the request becomes 'false' or the user press the stop button
	2) if the user has pressed the stop button, the robot waits until the user presses the resume button
	3) send to the robot the request to execute the <kc>turnLeft</kc> only in the case that the last answer is 'false'
</pre>
</li>

</ul>
 <br/><br/>

The following resources could be usefully exploited to reduce the development time of a first prototype of the application:

<ol>
<li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/consolegui/Consolegui.java" target="code">Consolegui.java</a>  
(in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/consolegui" target="code">it.unibo.virtualrobotclient</a>) </li>

<li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv/RobotMovesInfo.java" target="code">RobotMovesInfo.java</a>  
(in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv" target="code">it.unibo.virtualrobotclient</a>) </li>


<li>The  <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv/RobotInputController.java" target="code">RobotInputController.java</a>  
(in project <a href="../../it.unibo.virtualrobotclient/app/src/main/java/it/unibo/wenv" target="code">it.unibo.virtualrobotclient</a>) </li>
</ol>

 <br/><br/>

The expected time required for the development of the application is (no more than) 6 hours.
<h2>Test plans</h2> 
To check that the application fulfills the requirements, we could keep track of the moves done by the robot.
For example:
 
<pre>
...
let us define <kc>String moves="";</kc>
for 4 times: 
    1) send to the robot the request to execute the command <kc>moveForward</kc>;
    if the answer is 'true' <ks>append the symbol "w"</ks> to <kc>moves</kc> and continue to do 1); 
    2) when the answer of the request becomes 'false',
    send to the robot the request to execute the command <kc>turnLeft</kc> and <ks>append the symbol "l"</ks> to <kc>moves</kc>
</pre>
 
In this way, when the application terminates, the string <kc>moves</kc> should have the typical structure of a 
<a href="https://en.wikipedia.org/wiki/Regular_expression" target="web"><em>regular expression</em></a>,
that can be easily checked with a TestUnit software:
<pre><kc>moves</kc>: <ks>"w*lw*lw*lw*l"</ks>     <kc><ks>*</ks> : repetion N times(N>=0) </pre>


<h2>Project</h2> 
<table style="width:98%">
<tbody>	
<tr>
<td>
<h3>Nature of the application component</h3>
The <em>resumableBoundaryWalker</em> application is a <k>conventional Java program</k>, represented in the figure as an object with an internal thread.
<br/>
Our application should:
<ul>
<li>send a <em>request</em> to WEnv for the execution of a robot-move command</li>
<li>handle the <em>reply</em> sent by WEnv to the robot-move command request</li>
<li>handle the information possibly sent by WEnv to boundaryWalk as a <em>dispatch</em> carrying the distance detected by the sonar</li>
</ul>

</td>
<td style="width:50%" >

<center><img src="./img/logicArch3.png" alt="larch3" width="98%" ></center>
 
</td>
</tr>
<tr>
<td>
<h3>Zoom in the resumableBoundaryWalker architecture</h3>
To make the 'business code' as much
independent as possibile from the
technological details of the
interaction with the virtual robot 
(and with any other type of robot in
the future), let us structure the code
according to a conventional <em>layered
architecture</em>, which is the simplest
form of software architectural
pattern, where the components are
organized in horizontal layers.
<div class="remark">
The architecture of this project
make refernce to the
<a href="VirtualRobot2021.html" target="web"><ks>BoundaryWalk_Project</ks></a> and the
<a href="VirtualRobot2021.html" target="web"><ks>VirtualRobot_Project</ks></a>. The first
layered structure is reported in
the <ks>BoundaryWalk</ks>. the
observer pattern is also used to
manage asynchronous
communication, as explained
in <a href="VirtualRobot2021.html" target="web"><ks>VirtualRobot_Client</ks></a>
document. We can see the
architecture in the image on
the left.
</div>

</td>
<td style="width:50%" >

<center><img src="./img/RobotBoundaryZooming.png" alt="RobotBoundaryZooming" width="98%" ></center>
</td>
</tr>
<tr>
<td>
<h3>Adding isolated business logic to save the robots moves history</h3>
Referencing <a href="VirtualRobot2021.html" target="web"><ks>VirtualRobot_Client</ks></a> we isolate the business logic to mantain the robot moves info as in the image, adding two components <ks>RobotBoundaryLogic</ks> and <ks>RobotMovesInfo</ks>.
</td>
<td style="width:50%" >

<center><img src="./img/RobotBoundaryArilZooming.png" alt="RobotBoundaryArilZooming" width="98%" ></center>
</td>
</tr>
<tr>
<td>
<h3>User Interface components:ConsoleGui</h3>
The user interface have to start, stop and resume the Robot. To do this,we add the <a href="VirtualRobot2021.html" target="web"><ks>Consolegui.java</ks></a> as an
observer observing the robot
controller <ks>RobotInputController</ks>.
This observer will be updated by the
User Interface (Gui) and will send
the action from the gui to the
<ks>RobotInputController</ks> that will
handle them and stop or resume the
robot. In this way we do not have to
change any component
functionality.


</td>
</tr>


 </tbody>
</table>
 
</div>

<h2>Testing</h2> 
 

<h2>Deployment</h2> 
The deployment consists in the commit of the application on a project named <ks>iss2021_resumablebw</ks> of the MY GIT repository ( <a href="https://github.com/Afranz1/FranzeseAntonioRoot"> https://github.com/Afranz1/FranzeseAntonioRoot</a> ).
<br/><br/>
The final commit commit has done after <k>5</k> hours of work.
 
<h2>Maintenance</h2> 
 
<!-- USEFUL
<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
 QUESTIONS:
chiarisce cosa il committente intende con 'Optionally'  
chiarisce cosa il committente intende con 'should remember' 
chiarisce cosa il committente intende con 'mental map'
definisce la user story in modo da comprendere TUTTI i requisiti (anche opzionali)
discute se sia meglio avvalersi di HTTP o delle websocket e perchè
discute se sia meglio usare il linguaggio di comando cril, aril (o altro) e perchè
discute se sia meglio muovere il robot in modo random o in modo organizzato 
discute se il ritorno alla den debba/possa avvenire senza ricalcare il percorso effettuato
presenta ogni TestPlan collegandolo ad una user story e in modo 'concreto' (non come un insieme di intenti)
propone diverse tipologie di scene/situazioni per il testing
individua e propone (motivandola) una lista di priorità per il soddisfacimento dei requisiti 
presenta una stima dei tempi di realizzazione 
presenta un elenco delle risorse che sarebbe opportuno avere e/o procurarsi
presenta una architettura di progetto
presenta dettagli di progetto che permettono una precisa implementazione da parte di chi legge
pone in evidenza le parti di funzionamento proattivo e quelle di funzionamento reattivo
ECCEDE nelle dimensioni del file (al momento > 1600Kb)


-->
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); color:white">
By Antonio Franzese email: antonio.franzese4@studio.unibo.it   
<img src="./img/me.jpeg" alt="me" width="10%" height="10%">
</div> 
</body>
</html>